(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{73474:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/addfolder",function(){return n(93244)}])},93244:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(85893),o=n(67294),l=n(88205),a=n(9008),s=n.n(a),u=n(46690),c=n(44961),i=n(39023),d=n(47568),f=n(41799),p=n(69396),g=n(70655),h=n(26953),b=n(98847),v=n(66112);var x=n(1864),m=n.n(x),w=n(11163),y=n(57114),_=n(11466),Z=n(42484),F=n.n(Z),N=(n(15371),n(2127)),S=n(31838),k=n(34155),P=[k.env.NFT_STORAGE_API_KEY],A=function(){(0,w.useRouter)();var e=(0,o.useState)([]),t=(e[0],e[1],(0,o.useState)(null)),n=(t[0],t[1]),r=(0,o.useState)(),l=r[0],a=r[1],s=(0,o.useState)(),u=(s[0],s[1]),c=(0,o.useState)(),i=(c[0],c[1]),x=(0,o.useState)(),Z=(x[0],x[1]),A=(0,o.useState)(),E=A[0],j=A[1],T=(0,o.useState)({name:""}),U=T[0],G=T[1],I=function(){var e=(0,d.Z)((function(e){var t,r,o,l,a;return(0,g.__generator)(this,(function(s){switch(s.label){case 0:if(!U.name||!e)return[2];console.log("About to upload selected Folder..."),3!==k.argv.length&&console.error("usage: ".concat(k.argv[0]," ").concat(k.argv[1]," <directory-path>")),k.argv[2],t=async function*(){throw new Error("Unsupported in this environment")}(),r=new v.j3({APIKEY:P}),s.label=1;case 1:return s.trys.push([1,4,,5]),console.log("Trying to upload folder to ipfs"),j("Uploading Folder to IPFS & Filecoin via NFT.storage."),console.log("storing file(s) from ".concat(m())),[4,r.storeDirectory(t)];case 2:return o=s.sent(),console.log("cid is: ",{metaData:o}),i(o.url),[4,r.status(o)];case 3:return l=s.sent(),console.log(l),[2,o];case 4:return a=s.sent(),n("Could store file to NFT.Storage - Aborted file upload."),console.log("Error Uploading Content",a),[3,5];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,d.Z)((function(e){var t,r,o,l,a,s;return(0,g.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),j("Adding transaction to Polygon Mumbai Blockchain."),[4,(new(F())).connect()];case 1:return t=u.sent(),r=new y.Q(t),o=U.privatefile.toString(),l=new _.CH(S.O,N.Mt,r.getSigner()),console.log("Connected to contract",S.O),console.log("IPFS blockchain uri is ",e.url),[4,l.createFile(e.url,o)];case 2:return a=u.sent(),console.log("File successfully created and added to Blockchain"),[4,a.wait()];case 3:return u.sent(),[2,a];case 4:return s=u.sent(),n("Failed to send tx to Polygon Mumbai."),console.log(s),[3,5];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,d.Z)((function(e,t){var n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return e.preventDefault(),[4,I(t)];case 1:return n=r.sent(),[4,O(n)];case 2:return r.sent(),function(e,t){console.log("getIPFSGatewayURL2 two is ..."),i(M(e)),j("File addition was successfully!"),console.log("Preview details completed")}(n),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),M=function(e){return console.log("ipfsGateWayURL = ","ipfsGateWayURL"),"https://${urlArray[2]}.ipfs.nftstorage.link/${urlArra"};return(0,h.tZ)(b.xu,{as:"section",sx:C.section},(0,h.tZ)("div",{className:"bg-purple-100 text-4xl text-center text-black font-bold pt-10"},(0,h.tZ)("h1",null," Add Folder")),(0,h.tZ)("div",{className:"flex justify-center bg-purple-100"},(0,h.tZ)("div",{className:"w-1/2 flex flex-col pb-12 "},(0,h.tZ)("input",{placeholder:"Give the folder a name",className:"mt-5 border rounded p-4 text-xl",onChange:function(e){return G((0,p.Z)((0,f.Z)({},U),{name:e.target.value}))}}),(0,h.tZ)("div",{className:"MintNFT text-xl text-black"},(0,h.tZ)("form",null,(0,h.tZ)("h3",null,"Select a Folder"),(0,h.tZ)("input",{type:"file",multiple:!0,directory:"",mozdirectory:"",webkitdirectory:"true",onChange:function(e){console.log("folder for upload selected..."),a(e.target.files[0]),j(""),u(""),i(""),Z("")},className:"text-black mt-2 border rounded text-xl"})),E&&(0,h.tZ)("p",null,E)),(0,h.tZ)("button",{type:"button",onClick:function(e){return R(e,l)},className:"font-bold mt-20 bg-purple-700 text-white text-2xl rounded p-4 shadow-lg"},"Publish Folder"))))},C={section:{backgroundColor:"primary",pt:[17,null,null,20,null],pb:[6,null,null,12,16]}};function E(){return(0,r.jsxs)(l.f,{theme:u.Z,children:[(0,r.jsx)(s(),{children:(0,r.jsx)("link",{rel:"shortcut icon",href:"/images/logo.png"})}),(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(c.Z,{title:"Add new folder",description:"add a new folder"}),(0,r.jsx)(A,{})]})]})}},76647:function(){}},function(e){e.O(0,[277,294,630,656,104,362,882,474,881,774,888,179],(function(){return t=73474,e(e.s=t);var t}));var t=e.O();_N_E=t}]);