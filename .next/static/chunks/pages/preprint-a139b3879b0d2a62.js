(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{7172:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/preprint",function(){return t(18238)}])},18238:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var r=t(85893),s=t(67294),i=t(88205),l=t(46690),o=t(44961),a=t(9008),c=t.n(a),u=t(39023),d=t(1321),h=t(41522),f=t(13530),m=t(47568),p=t(41799),x=t(69396),g=t(70603),b=t(70655);function j(e){var n=e.children,t=(0,d.useAuth)(),i=t.authStatus,l=t.identity,o=t.registerAndStoreIdentity,a=t.cancelRegisterAndStoreIdentity,c=(0,s.useState)(""),u=c[0],h=c[1];if(i===d.AuthStatus.SignedIn)return n;if(i===d.AuthStatus.EmailVerification)return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"near-white",children:"Verify your email address!"}),(0,r.jsxs)("p",{children:["Click the link in the email we sent to ",l&&l.email," to sign in."]}),(0,r.jsx)("form",{onSubmit:function(e){e.preventDefault(),a()},children:(0,r.jsx)("button",{type:"submit",className:"items-center font-bold mt-2 bg-black text-white text-2xl rounded shadow-lg p-5",children:"Cancel"})})]});var f=function(){var e=(0,m.Z)((function(e){var n;return(0,b.__generator)(this,(function(t){switch(t.label){case 0:e.preventDefault(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,o(u)];case 2:return t.sent(),[3,4];case 3:throw n=t.sent(),new Error("failed to register",{cause:n});case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsxs)("div",{className:"mb3",children:[(0,r.jsx)("label",{htmlFor:"email",className:"db mb2",children:"Email address:"}),(0,r.jsx)("input",{id:"email",className:" border rounded p-4 w-100 mb-4",type:"email",value:u,onChange:function(e){return h(e.target.value)},required:!0})]}),(0,r.jsx)("div",{className:"mx-0 min-w-full flex flex-col items-center",children:(0,r.jsx)("button",{type:"submit",className:"items-center font-bold mt-2 bg-black text-white text-2xl rounded shadow-lg p-5",children:"Register"})})]})}var v=t(57114),w=t(11466),y=t(42484),N=t.n(y),S=t(2127),k=t(31838);var C,A=function(e){var n=e.file,t=e.uploadedCarChunks;return console.log("Enter Uploading Function"),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"spinner mr3 flex-none"}),(0,r.jsxs)("div",{className:"flex-auto",children:[(0,r.jsxs)("p",{className:"truncate",children:["Uploading VIDEO NEWS for ",n.name]}),t.map((function(e){var n=e.cid,t=e.size;return(0,r.jsxs)("p",{className:"f7 truncate",children:[n.toString()," (",t," bytes)"]},n.toString())}))]})]})},_=function(e){var n=e.error;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"near-white",children:["\u26a0\ufe0f Error: failed to upload file: ",n.message]}),(0,r.jsx)("p",{children:"Check the browser console for details."})]})},F=function(e){var n=e.file,t=e.dataCid,s=e.uploadedCarChunks;return console.log("Enter Done Function"),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"near-white",children:"Done!"}),(0,r.jsx)("p",{className:"f6 code truncate",children:t.toString()}),(0,r.jsx)("p",{children:(0,r.jsxs)("a",{href:"https://w3s.link/ipfs/".concat(t),className:"blue",children:["View ",n.name," on IPFS Gateway."]})}),(0,r.jsxs)("p",{className:"near-white",children:["Chunks (",s.length,"):"]}),s.map((function(e){var n=e.cid,t=e.size;return(0,r.jsxs)("p",{className:"f7 truncate",children:[n.toString()," (",t," bytes)"]},n.toString())}))]})},E=(C=function(){var e=(0,g.Z)((0,h.useUploader)(),2),n=e[0].uploadedCarChunks,t=e[1],i=(0,s.useState)(null),l=i[0],o=i[1],a=(0,s.useState)(""),c=a[0],u=a[1],d=(0,s.useState)(),f=d[0],j=d[1],y=(0,s.useState)(""),C=y[0],E=y[1],Z=(0,s.useState)(""),I=Z[0],T=Z[1],D=(0,s.useState)(""),U=D[0],P=D[1],O=(0,s.useState)(""),z=O[0],B=O[1],V=(0,s.useState)(null),M=V[0],R=V[1],W=(0,s.useState)({description:""}),q=W[0],G=W[1];if(!t)return null;var X=function(){var e=(0,m.Z)((function(e){var s,i,o;return(0,b.__generator)(this,(function(a){switch(a.label){case 0:s=q.description,e.preventDefault(),P(s),j(""),a.label=1;case 1:return a.trys.push([1,3,4,7]),console.log("About to upload file",l),B("uploading"),j("Oops, Something went wrong. Kindly choose a video to Upload along with its description using W3UI."),console.log("After setting status to Uploding"),[4,t.uploadFile(l)];case 2:return i=a.sent(),console.log("const cid is:",i),u(i),console.log("File Name is:",l.name),T(l.name),console.log("File Size is:",l.size),E(l.size),[3,7];case 3:return o=a.sent(),console.error(o),R(o),[3,7];case 4:return console.log("Before status done from Finally"),B("done"),console.log("Setting status to done from Finally"),"done"!==z?[3,6]:[4,H()];case 5:return a.sent(),[2,M?(0,r.jsx)(_,{error:M}):(0,r.jsx)(F,{file:l,dataCid:c,uploadedCarChunks:n})];case 6:return[7];case 7:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();if("uploading"===z)return console.log("Enter status uploading"),(0,r.jsx)(A,{file:l,uploadedCarChunks:n});var H=function(){var e=(0,m.Z)((function(){var e,n,t,r,s,i;return(0,b.__generator)(this,(function(l){switch(l.label){case 0:j("Adding transaction to Polygon Mumbai.."),l.label=1;case 1:return l.trys.push([1,5,,6]),console.log("Adding transaction to Polygon Mumbai.."),console.log("Description is:",U),console.log("File Name is:",I),console.log("File Size is:",C),e="https://".concat(c,".ipfs.w3s.link"),console.log("sendTxToBlockchain ipfsGateWayURL = ",e),[4,(new(N())).connect()];case 2:return n=l.sent(),t=new v.Q(n),r=new w.CH(k.O,S.Mt,t.getSigner()),console.log("sendTxToBlockchain Connected to contract",k.O),console.log("sendTxToBlockchain IPFS blockchain uri is ",e),[4,r.createFile(e,I,U,C)];case 3:return s=l.sent(),console.log("sendTxToBlockchain File successfully created and added to Blockchain"),[4,s.wait()];case 4:return l.sent(),j("Video was published successfully!"),[2,s];case 5:return i=l.sent(),console.log(i),[3,6];case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:"text-black text-xl",children:[(0,r.jsxs)("form",{onSubmit:X,children:[(0,r.jsxs)("div",{className:"db mb3 text-center font-bold",children:[(0,r.jsx)("h1",{children:"Upload your news"}),(0,r.jsx)("label",{htmlFor:"file",className:"db mb1 text-left",children:"Description"}),(0,r.jsx)("input",{placeholder:"News Description",className:" border rounded p-4 w-100 mb-4",onChange:function(e){return G((0,x.Z)((0,p.Z)({},q),{description:e.target.value}))}}),(0,r.jsx)("label",{htmlFor:"file",className:"db mb1 text-left",children:"File:"}),(0,r.jsx)("input",{id:"file",className:"db pa2 w-100 ba br2",type:"file",onChange:function(e){return o(e.target.files[0])},required:!0})]}),(0,r.jsx)("div",{className:"mx-0 min-w-full flex flex-col items-center",children:(0,r.jsx)("button",{type:"submit",className:"items-center font-bold mt-2 bg-black text-white text-2xl rounded shadow-lg p-5",children:"Publish News"})})]}),f&&(0,r.jsx)("p",{className:"text-center text-white pt-5",children:f})]})},function(e){return(0,r.jsx)(j,{children:(0,r.jsx)(C,(0,p.Z)({},e))})});function Z(e){var n=e.children,t=(0,d.useAuth)().loadDefaultIdentity;return(0,s.useEffect)((function(){t()}),[]),n}var I=function(){return(0,r.jsx)(d.AuthProvider,{children:(0,r.jsx)(h.UploaderProvider,{children:(0,r.jsx)(Z,{children:(0,r.jsxs)("div",{className:"vh-100 flex flex-column justify-center items-center sans-serif light-silver bg-blue-900",children:[(0,r.jsx)("header",{children:(0,r.jsx)(f.Z,{src:"./images/logoonlyblue.png",loading:"lazy",alt:"logo"})}),(0,r.jsx)("div",{className:"w-90 w-50-ns mw6",children:(0,r.jsx)(E,{})})]})})})})};function T(){return(0,r.jsxs)(i.f,{theme:l.Z,children:[(0,r.jsx)(c(),{children:(0,r.jsx)("link",{rel:"shortcut icon",href:"/images/logo.png"})}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(o.Z,{title:"Add new file",description:"add a new file"}),(0,r.jsx)(I,{})]})]})}},70603:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function s(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"===typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(n,{Z:function(){return s}})}},function(e){e.O(0,[277,294,630,656,104,474,881,774,888,179],(function(){return n=7172,e(e.s=n);var n}));var n=e.O();_N_E=n}]);